/*
 * Scamp Player Lite ver. 1.1.1
 * jQuery Sound Manager 2 Plugin
 *
 * Copyright (c) 2021
 * Rascals Themes
 *
 */

!function(a){var t={tracks:null,selector:".spl-track",track:null,index:null,playing_track:null,current:null,sm_init:null,path:null,oneplay:!0,global_volume:!0,track_vol:100,mobile:!1},e={},n={init:function(n){(e=a.extend({},t,n)).tracks=this,window.soundManager&&(sm_obj={onready:function(){if(soundManager._writeDebug("SM2 ready!"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e.mobile=!0),e.mobile&&null!=e.path){a("body").append('<div id="scamp-mobile-init"></div>');var t=soundManager.createSound({id:"init_mobile_track",url:e.path+"/blank.mp3",autoload:!1,volume:10,onload:function(){},onplay:function(){},onpause:function(){},onresume:function(){},onstop:function(){},onfinish:function(){},whileloading:function(){},whileplaying:function(){}});a("#scamp-mobile-init").on("touchstart click mousemove",function(e){t.play(),a(this).remove()})}e.sm_init=!0;var l=".spl-playlist";null!=e.playlistSelector&&""!=e.playlistSelector&&(l=e.playlistSelector),e.tracks.ScampPlayerLite("make_tracklist",a(l));var i=a(e.selector+'[data-autoplay="true"]').eq(0);a(i).length&&(e.index=a(e.selector).index(i),e.track=a(i),e.tracks.ScampPlayerLite("add_sound")),a(document).on("click",".spl-play-button",function(t){var n=a(this).parents(e.selector);if(e.index=a(e.selector).index(n),a(this).parents(l).length){var i=a(this).parents(l);i.hasClass("ready")||e.tracks.ScampPlayerLite("make_tracklist",i)}e.track=a(this).parents(e.selector),e.tracks.ScampPlayerLite("add_sound"),t.preventDefault()}),n.onReady.call(this)},ontimeout:function(){soundManager._writeDebug("SM2 init failed!")},defaultOptions:{volume:n.global_volume,usePeakData:!1}}),a.extend(e.sm_options,sm_obj),soundManager.setup(e.sm_options)},make_tracklist:function(t){t.length>0&&t.each(function(t){var n=a(this),l=n.data("autoplay"),i=n.data("playnext");$length=n.find(e.selector).length-1,i=null!=i&&0!=i,l=null!=l&&0!=l,n.find(e.selector).each(function(t){l&&0==t&&a(this).attr("data-autoplay",!0),i&&t<$length&&a(this).attr("data-playnext",!0)}),n.addClass("ready")})},add_sound:function(){var t=a(e.track),n="",l=t.data("scamp_player_lite"),i=null;null!=e.playing_track&&(n=a(e.playing_track).data("url"),i=a(e.selector).index(a(e.playing_track))),void 0===t||null==e.playing_track||null==i?(e.playing_track=e.track,e.tracks.ScampPlayerLite("create"),t.data("scamp_player_lite").togglePause()):t.data("url")!=n||i!=e.index?(e.tracks.ScampPlayerLite("remove_sound"),e.playing_track=e.track,e.tracks.ScampPlayerLite("create"),t.data("scamp_player_lite").togglePause()):l.togglePause()},remove_sound:function(){var t="ontouchstart"in window,n=t?"touchstart":"mousedown";a(e.playing_track).removeClass("ready playing paused loaded"),a(e.playing_track).off("spl_onloaded.scamp_player_lite, spl_onplay.scamp_player_lite spl_onresume.scamp_player_lite, spl_onpause.scamp_player_lite, spl_onstop.scamp_player_lite, spl_onfinish.scamp_player_lite"),a(e.playing_track).find(".spl-progress").off(n),a(e.playing_track).find(".spl-volume").off(n),a(e.playing_track).find(".spl-loading").width(0),a(e.playing_track).find(".spl-position").width(0),a(e.playing_track).find(".spl-hidden-content").remove(),a(e.playing_track).data("scamp_player_lite").stop(),a(e.playing_track).data("scamp_player_lite").setPosition(0),a(e.playing_track).data("scamp_player_lite").destruct(),a(e.playing_track).removeData("scamp_player_lite"),e.playing_track=null},create:function(){soundManager._writeDebug("ScampPlayerLite ready!");var t="ontouchstart"in window,n=t?"touchstart":"mousedown",l=t?"touchmove":"mousemove",i=t?"touchend":"mouseup",s=a(e.playing_track),o=null,r=s.data("autoplay"),p=s.data("url"),d=s.data("volume");s.hasClass("ready")||(r=null!=r&&0!=r,p=null!=p&&""!=p?p:s.attr("href"),d=null!=d&&""!=d?d:e.volume,soundManager.canPlayURL(p)||soundManager._writeDebug(p+" - this track can not be played!"),s.hasClass("spl-simply")&&s.append('<span class="spl-hidden-content"><span class="ui spl-timing"><span class="spl-elapsed"></span><span class="spl-total"></span></span><span class="ui spl-volume"><span class="spl-vol-position"></span></span><span class="ui spl-progress"><span class="spl-loading"></span><span class="spl-position"></span></span></span>'),s.find(".spl-hidden-content").addClass("spl-visible"),s.find(".spl-vol-position").css("width",d+"%"),s.data("scamp_player_lite"),s.data("scamp_player_lite",soundManager.createSound({id:"spl-track",url:p,volume:d,onload:function(){soundManager._writeDebug("----------- onLoad - "+this.id),a(document).trigger("spl_onloaded",[s]),s.addClass("loaded").removeClass("loading")},onplay:function(){soundManager._writeDebug("----------- onplay - "+this.id),a(document).trigger("spl_onplay",[s]),s.removeClass("paused").addClass("playing"),1==s.data("scamp_player_lite").readyState&&s.addClass("loading"),e.global_volume&&e.track_vol&&(s.find(".spl-vol-position").css("width",e.track_vol+"%"),s.data("scamp_player_lite").setVolume(e.track_vol))},onpause:function(){soundManager._writeDebug("---------- onpause - "+this.id),a(document).trigger("spl_onpause",[s]),o||s.removeClass("playing").addClass("paused")},onresume:function(){soundManager._writeDebug("--------- onresume - "+this.id),s.triggerHandler("spl_onresume.scamp_player_lite"),s.removeClass("paused").addClass("playing")},onstop:function(){soundManager._writeDebug("----------- onstop - "+this.id),a(document).trigger("spl_onstop",[s]),s.removeClass("playing loading paused ready"),s.find(".spl-elapsed, .spl-total").empty(),s.find(".spl-position").width(0)},onfinish:function(){soundManager._writeDebug("-------- onfinish - "+this.id),a(document).trigger("spl_onfinish",[s]),s.removeClass("playing loading paused"),s.find(".spl-elapsed, .spl-total").empty(),s.find(".spl-position").width(0),null!=s.data("playnext")&&1==s.data("playnext")&&(soundManager._writeDebug("---------------------------\x3e next"),e.tracks=a(".spl-track"),e.tracks.length>0&&(e.index+1>e.tracks.length?e.index=0:e.index=e.index+1,e.track=e.tracks[e.index],e.tracks.ScampPlayerLite("add_sound")))},whileloading:function(){s.find(".spl-loading").width(s.data("scamp_player_lite").bytesLoaded/s.data("scamp_player_lite").bytesTotal*100+"%")},whileplaying:function(){s.find(".spl-position").width(s.data("scamp_player_lite").position/s.data("scamp_player_lite").durationEstimate*100+"%"),s.find(".spl-elapsed").html(_formatTime(s.data("scamp_player_lite").position)),s.find(".spl-total").html(_formatTime(s.data("scamp_player_lite").durationEstimate))}})).addClass("ready").find(".ui").filter(".spl-progress").on(n,function(n){var s,r=a(this).addClass("searching"),p=r.find(".spl-postion"),d=r.offset().left,c=r.width(),u=r.parents(e.selector).data("scamp_player_lite");return s=r.parents(e.selector).hasClass("playing"),o=!0,u.pause(),a(document).on(l,function(a){var e=t?a.originalEvent.touches[0]:a,n=Math.max(0,Math.min(e.clientX-d,c));return p.width(n),u.setPosition(n/c*u.durationEstimate),!1}).on(i,function(t){return o=!1,r.removeClass("searching"),s&&u.resume(),a(this).off(l),a(this).off(i),!1}).trigger({type:l,clientX:n.clientX}),!1}).parent().find(".ui").filter(".spl-volume").on(n,function(n){var s=a(this),o=s.find(".spl-vol-position"),r=s.offset().left,p=s.width(),d=s.parents(e.selector).data("scamp_player_lite"),c=null;return a(document).on(l,function(a){var e=t?a.originalEvent.touches[0]:a,n=Math.max(0,Math.min(e.clientX-r,p));return c=Math.floor(n/p*100),o.width(n),soundManager._writeDebug("SET VOLUME: "+c),d.setVolume(c),!1}).on(i,function(t){return e.global_volume&&(e.track_vol=c),a(this).off(l),a(this).off(i),!1}).trigger({type:l,clientX:n.clientX}),!1}),_formatTime=function(a){var t=Math.floor(a/1e3),e=Math.floor(t/60),n=t-60*e;return e+":"+(n<10?"0"+n:n)})},play:function(){if(e.sm_init){var t=a(this);t.length&&(soundManager._writeDebug("PLAY EVENT"),e.index=a(e.selector).index(t),e.track=a(t),e.tracks.ScampPlayerLite("add_sound"))}},pause:function(){if(e.sm_init){var t=a(this);t.length&&void 0!==t.data("scamp_player_lite")&&(soundManager._writeDebug("PAUSE EVENT"),1==(t=a(this).data("scamp_player_lite")).playState&&t.pause())}},stop:function(){if(e.sm_init){var t=a(this);t.length&&void 0!==t.data("scamp_player_lite")&&(soundManager._writeDebug("STOP EVENT"),e.tracks.ScampPlayerLite("remove_sound"))}},volume:function(t){if(e.sm_init){var n=a(this);n.length&&void 0!==n.data("scamp_player_lite")&&(soundManager._writeDebug("SET VOLUME: "+t),(n=a(this).data("scamp_player_lite")).setVolume(t))}}};a.fn.ScampPlayerLite=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void a.error("Method "+method+" does not exist on jQuery.ScampPlayerLite"):n.init.apply(this,arguments)}}(jQuery);