jQuery(document).ready(function(b){b("._button").button();var c=b(".rascals-panel-menu > li > a"),a=b(".rascals-panel-menu li > .rascals-panel-sub-menu");b(".rascals-panel-menu li a").each(function(f){var h=b(this).data("tab_id"),g=b(this).next(),e=null;if(g.length>0){e=b(this).parent().find("ul").clone();e.find("a").contents().unwrap().attr("id","");e="<ul>"+e.html()+"</ul>";b("#"+h).find(".rascals-panel-breadcrumb div:last-child").append(e)}});function d(f,e){var g=-(e*20);f.animate({top:g})}c.first().addClass("active").next().slideDown("normal").find("a:first").addClass("active");b(".rascals-panel-tab:first").css("display","block");if(b(".rascals-panel-tab:first").find(".rascals-panel-tab").length>0){b(".rascals-panel-tab:first .rascals-panel-tab:first").css("display","block")}c.on("click",function(g){var f=b(this).next(),h=b(this).data("tab_id"),e=b("#"+h);g.preventDefault();if(!b(this).hasClass("active")){b(".rascals-panel-tab").css("display","none");e.fadeIn(500);a.slideUp("normal");b(this).next().stop(true,true).slideToggle("normal");c.removeClass("active");a.find("a").removeClass("active");b(this).addClass("active");b(this).next().find("li:first a").addClass("active");b(".rascals-panel-tab:visible .rascals-panel-tab:first").css("display","block");d(b(".rascals-panel-breadcrumb ul",e),0)}});a.find("li > a").on("click",function(h){var i=b(this).data("tab_id"),g=b("#"+i),f=null,e=null;if(!b(this).hasClass("active")){a.find("a").removeClass("active");b(this).addClass("active");b(".rascals-panel-tab:visible .rascals-panel-tab").css("display","none");f=b(".rascals-panel-tab:visible > .rascals-panel-breadcrumb ul");g.fadeIn(500);e=b(this).parent().index();d(f,e)}h.preventDefault()});b("#show-res-nav").on("click",function(e){if(b("#rascals-panel-sidebar").hasClass("mobile-nav")){b("#rascals-panel-sidebar").removeClass("mobile-nav")}else{b("#rascals-panel-sidebar").addClass("mobile-nav")}e.preventDefault()});b("#_save, #_save_mobile").on("click",function(){NProgress.start();b(".custom-tiny-editor").each(function(){if(b(this).children().hasClass("tmce-active")){var g=b(this).data("id");g="#"+g;var f=b(g+"_ifr",this).contents().find("body").html();if(f){if(f==""||f=="<p><br></p>"||f=='<p><br data-mce-bogus="1"></p>'){f=""}b("textarea"+g,this).val(f)}}});var e={action:"panel_save",data:b("#rascals-panel_form").find(":input:not(.no-save)").serializePost()};b.ajax({url:ajaxurl,data:e,type:"POST",success:function(g){if(g=="import_error"){b("#rascals-panel-notices").notify("create",{title:"Error!",text:"Import error."});NProgress.done();return false}g=JSON.parse(g);var f=false;if(b("#data-import-wrap :input").length>0&&b("#data-import-wrap :input").val()!=""){f=true}b("#rascals-panel_form :input").each(function(k){var l=b(this).attr("name");var j=b(this).val();var h=g[l];if(h!=undefined&h!=j){b(this).val(g[l])}});if(b.inArray("color",rascalspanel_vars.used_plugins)!==-1){b(".colorpicker-input").each(function(){if(b(this).val()!=""){var h=b(this).val();b(this).next().css("background-color",h)}})}b(".custom-tiny-editor").each(function(){var h=b(this).data("id");h="#"+h;var i=b("textarea"+h,this).val();b(h+"_ifr",this).contents().find("body").html(i)});NProgress.done();if(f){b("#rascals-panel-notices").notify("create",{title:"Success!",text:"New settings are imported."});setTimeout(function(){location.reload()},2000);return false}b("#rascals-panel-notices").notify("create",{title:"Success!",text:"Settings are saved."})}});return false});if(b("#rascals-panel").data("autosave")==true){b("#_save").trigger("click")}b(".data-import").toggle(function(){var e='<textarea name="import" style="height:200px;overflow:auto" cols="" rows=""></textarea>';b("#data-import-wrap .input-wrap").append(e);b("#data-import-wrap").slideDown(400);return false},function(){b("#data-import-wrap").slideUp(function(){b("#data-import-wrap .input-wrap :input").remove()});return false});b("#rascals-panel-notices").notify()});(function(a){a.fn.serializePost=function(){var f={};var g=this.serializeArray();for(var d=g.length;d--;){var c=g[d].name;var e=g[d].value;var b=c.indexOf("[]");if(b>-1){c=c.substring(0,b);if(!(c in f)){f[c]=[]}f[c].push(e)}else{f[c]=e}}return f}})(jQuery);